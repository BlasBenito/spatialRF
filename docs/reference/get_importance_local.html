<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Extracts local (case-specific) variable importance scores from models fitted with rf(), rf_repeat(), or rf_spatial()."><title>Extract local variable importance from model — get_importance_local • spatialRF</title><script src="../deps/jquery-3.6.1/jquery-3.6.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract local variable importance from model — get_importance_local"><meta property="og:description" content="Extracts local (case-specific) variable importance scores from models fitted with rf(), rf_repeat(), or rf_spatial()."><!-- mathjax --><script src="file:///usr/share/javascript/mathjax/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="extra.css"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">spatialRF</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Tutorials</h6>
    <a class="dropdown-item" href="../articles/non_spatial_models.html">Non-Spatial Random Forest Models</a>
    <a class="dropdown-item" href="../articles/spatial_models.html">Spatial Random Forest Models</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Development</h6>
    <a class="dropdown-item" href="../articles/development_roadmap.html">Development Roadmap</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/BlasBenito/spatialRF/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Extract local variable importance from model</h1>
      <small class="dont-index">Source: <a href="https://github.com/BlasBenito/spatialRF/blob/HEAD/R/get_importance_local.R" class="external-link"><code>R/get_importance_local.R</code></a></small>
      <div class="d-none name"><code>get_importance_local.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Extracts local (case-specific) variable importance scores from models fitted with <code><a href="rf.html">rf()</a></code>, <code><a href="rf_repeat.html">rf_repeat()</a></code>, or <code><a href="rf_spatial.html">rf_spatial()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_importance_local</span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>model</dt>
<dd><p>Model object from <code><a href="rf.html">rf()</a></code>, <code><a href="rf_repeat.html">rf_repeat()</a></code>, or <code><a href="rf_spatial.html">rf_spatial()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Data frame with one row per observation and one column per predictor variable. Each cell contains the local importance score for that variable at that observation.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Local importance measures how much each predictor contributes to predictions for individual observations, unlike global importance which summarizes contributions across all observations. This can reveal spatial or contextual patterns in variable influence.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="rf.html">rf()</a></code>, <code><a href="rf_repeat.html">rf_repeat()</a></code>, <code><a href="rf_spatial.html">rf_spatial()</a></code>, <code><a href="get_importance.html">get_importance()</a></code>, <code><a href="plot_importance.html">plot_importance()</a></code>, <code><a href="print_importance.html">print_importance()</a></code></p>
<p>Other model_info: 
<code><a href="get_evaluation.html">get_evaluation</a>()</code>,
<code><a href="get_importance.html">get_importance</a>()</code>,
<code><a href="get_moran.html">get_moran</a>()</code>,
<code><a href="get_performance.html">get_performance</a>()</code>,
<code><a href="get_predictions.html">get_predictions</a>()</code>,
<code><a href="get_residuals.html">get_residuals</a>()</code>,
<code><a href="get_response_curves.html">get_response_curves</a>()</code>,
<code><a href="get_spatial_predictors.html">get_spatial_predictors</a>()</code>,
<code><a href="print.html">print.rf</a>()</code>,
<code><a href="print_evaluation.html">print_evaluation</a>()</code>,
<code><a href="print_importance.html">print_importance</a>()</code>,
<code><a href="print_moran.html">print_moran</a>()</code>,
<code><a href="print_performance.html">print_performance</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">plants_rf</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Extract local importance scores</span></span></span>
<span class="r-in"><span><span class="va">local_imp</span> <span class="op">&lt;-</span> <span class="fu">get_importance_local</span><span class="op">(</span><span class="va">plants_rf</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View structure: rows = observations, columns = variables</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">local_imp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 227  17</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">local_imp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   bias_area_km2 bias_species_per_record climate_aridity_index_average</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      828.0285               -395.2323                     499.11729</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     -467.9925              -1007.3478                    -167.80674</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        0.0000                  0.0000                      26.38278</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     -212.0167                721.2856                     467.19906</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     1183.8162                950.5329                     880.59377</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     -205.3745                248.4184                       0.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   climate_hypervolume climate_velocity_lgm_average neighbors_count</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            885.6491                       0.0000          0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           -574.3834                    -862.5579      -1154.3253</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3              0.0000                       0.0000       -165.7917</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           1020.1034                     877.2258      -1349.4845</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           1269.9320                    -760.4056          0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6            380.8480                     105.5448       -397.5548</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   neighbors_percent_shared_edge human_population_density</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                     -257.9104                  0.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                     1128.5381                 44.69683</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                     -313.4053                337.68437</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                        0.0000                688.07958</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                    -1462.2742               1404.97754</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                        0.0000                340.49454</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   topography_elevation_average landcover_herbs_percent_average</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                       0.0000                        254.0174</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                     664.0936                       -323.0326</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                      89.4040                          0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                       0.0000                          0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                   -1117.9085                        751.4930</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                     183.2137                        297.9530</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   fragmentation_cohesion fragmentation_division neighbors_area human_population</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                 0.0000                 0.0000         0.0000            0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2               684.4019                 0.0000      -271.0058         -821.800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                 0.0000                 0.0000         0.0000         1818.641</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4              -345.8733               416.6738       676.9000         1478.199</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5               512.6154                 0.0000      1400.9972        -1419.067</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                 0.0000                 0.0000         0.0000            0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   human_footprint_average climate_bio1_average climate_bio15_minimum</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                940.8037             149.0290                0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                266.3238            -872.0896                0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                315.7241            2495.2004                0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                501.3918             917.7755                0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5               -527.6551             493.6461                0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                824.8517            -269.4552              773.9732</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Find which variable is most important for first observation</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">local_imp</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.max</a></span><span class="op">(</span><span class="va">local_imp</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "human_footprint_average"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://blasbenito.com" class="external-link">Blas M. Benito</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

