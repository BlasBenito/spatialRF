% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/distance_matrix.R
\name{distance_matrix}
\alias{distance_matrix}
\title{Compute pairwise distance matrix}
\usage{
distance_matrix(data = NULL, crs = 4326, verbose = TRUE)
}
\arguments{
\item{data}{Data frame with coordinate columns OR sf data frame. Coordinate columns can be named: longitude (x, X, lon, long, longitude, longitud) and latitude (y, Y, lat, latitude, latitud). Column name matching is case-insensitive. Default: \code{NULL}.}

\item{crs}{Coordinate reference system for data frame inputs. Can be numeric EPSG code (e.g., \code{4326} for WGS84), a proj4string, or \code{NA}. Ignored if \code{data} is an sf object (uses existing CRS). Default: \code{4326}}

\item{verbose}{Logical. If \code{TRUE}, prints distance range information. Default: \code{TRUE}.}
}
\value{
Numeric matrix (n×n) with pairwise distances in meters. Diagonal is 0. Row and column names are character indices ("1", "2", "3", ...").
}
\description{
Computes a square distance matrix from point or polygon geometries using \code{\link[sf:geos_measures]{sf::st_distance()}}. Supports sf objects and data frames with coordinate columns. Automatically handles both geographic (lat/lon) and projected coordinate systems. Output distances are always in meters (consistent with sf::st_distance()).
}
\details{
\subsection{Output Units}{

The returned matrix is in \strong{meters} to maintain consistency with \code{\link[sf:geos_measures]{sf::st_distance()}}, and has an attribute "units" with the value "m".

\strong{IMPORTANT:} When using the distance matrix with other spatialRF functions, ensure \code{distance.thresholds} are also specified in meters to maintain unit consistency.
}

\subsection{Computational Complexity}{

Distance matrix computation requires O(n²) pairwise distance calculations for n observations. Memory footprint is 8n² bytes (approximately 800 MB for n=10,000). For large datasets (n > 5,000), computation may take several minutes.
}
}
\examples{
#from dataframe
plants_distance <- distance_matrix(
  data = plants_df,
  crs = 4326
)

#it's in meters
attributes(plants_distance)$units

#convert to km
plants_distance <- plants_distance / 1000
#not required
attributes(plants_distance)$units <- "km"

#from sf
plants_sf <- sf::st_as_sf(
  x = plants_df,
  coords = c("x", "y"),
  crs = 4326
)

plants_distance <- distance_matrix(
  data = plants_sf
)

}
\seealso{
Other preprocessing: 
\code{\link{default_distance_thresholds}()},
\code{\link{double_center_distance_matrix}()},
\code{\link{is_binary}()},
\code{\link{make_spatial_fold}()},
\code{\link{make_spatial_folds}()},
\code{\link{the_feature_engineer}()},
\code{\link{weights_from_distance_matrix}()}
}
\concept{preprocessing}
