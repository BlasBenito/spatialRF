<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Multicollinearity reduction via Variance Inflation Factor — auto_vif • spatialRF</title><script src="../deps/jquery-3.6.1/jquery-3.6.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Multicollinearity reduction via Variance Inflation Factor — auto_vif"><meta name="description" content="Filters predictors using sequential evaluation of variance inflation factors. Predictors are ranked by user preference (or column order) and evaluated sequentially. Each candidate is added to the selected pool only if the maximum VIF of all predictors (candidate plus already-selected) does not exceed the threshold."><meta property="og:description" content="Filters predictors using sequential evaluation of variance inflation factors. Predictors are ranked by user preference (or column order) and evaluated sequentially. Each candidate is added to the selected pool only if the maximum VIF of all predictors (candidate plus already-selected) does not exceed the threshold."><link rel="stylesheet" href="extra.css"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">spatialRF</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/non_spatial_models.html">Non-Spatial Random Forest Models</a></li>
    <li><a class="dropdown-item" href="../articles/spatial_models.html">Spatial Random Forest Models</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Development</h6></li>
    <li><a class="dropdown-item" href="../articles/development_roadmap.html">Development Roadmap</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BlasBenito/spatialRF/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Multicollinearity reduction via Variance Inflation Factor</h1>
      <small class="dont-index">Source: <a href="https://github.com/BlasBenito/spatialRF/blob/HEAD/R/auto_vif.R" class="external-link"><code>R/auto_vif.R</code></a></small>
      <div class="d-none name"><code>auto_vif.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Filters predictors using sequential evaluation of variance inflation factors. Predictors are ranked by user preference (or column order) and evaluated sequentially. Each candidate is added to the selected pool only if the maximum VIF of all predictors (candidate plus already-selected) does not exceed the threshold.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">auto_vif</span><span class="op">(</span>x <span class="op">=</span> <span class="cn">NULL</span>, preference.order <span class="op">=</span> <span class="cn">NULL</span>, vif.threshold <span class="op">=</span> <span class="fl">5</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Data frame with predictors, or a <code>variable_selection</code> object from <code><a href="auto_cor.html">auto_cor()</a></code>. Default: <code>NULL</code>.</p></dd>


<dt id="arg-preference-order">preference.order<a class="anchor" aria-label="anchor" href="#arg-preference-order"></a></dt>
<dd><p>Character vector specifying variable preference order. Does not need to include all variables in <code>x</code>. If <code>NULL</code>, column order is used. Default: <code>NULL</code>.</p></dd>


<dt id="arg-vif-threshold">vif.threshold<a class="anchor" aria-label="anchor" href="#arg-vif-threshold"></a></dt>
<dd><p>Numeric (recommended: 2.5 to 10). Maximum allowed VIF among selected variables. Higher values allow more collinearity. Default: <code>5</code>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, prints messages about operations and removed variables. Default: <code>TRUE</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>List with class <code>variable_selection</code> containing:</p><ul><li><p><code>vif</code>: Data frame with selected variable names and their VIF scores.</p></li>
<li><p><code>selected.variables</code>: Character vector of selected variable names.</p></li>
<li><p><code>selected.variables.df</code>: Data frame containing selected variables.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The algorithm follows these steps:</p><ol><li><p>Rank predictors by <code>preference.order</code> (or use column order if NULL).</p></li>
<li><p>Initialize selection pool with first predictor.</p></li>
<li><p>For each remaining candidate:</p><ul><li><p>Compute VIF for candidate plus all selected predictors.</p></li>
<li><p>If max VIF equal or lower than <code>vif.threshold</code>, add candidate to selected pool.</p></li>
<li><p>Otherwise, skip candidate.</p></li>
</ul></li>
<li><p>Return selected predictors with their VIF values.</p></li>
</ol><p><strong>Data cleaning</strong>: Variables in <code>preference.order</code> not found in <code>colnames(x)</code> are silently removed. Non-numeric columns are removed with a warning. Rows with NA values are removed via <code><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit()</a></code>. Zero-variance columns trigger a warning but are not removed.</p>
<p>This function can be chained with <code><a href="auto_cor.html">auto_cor()</a></code> through pipes (see examples).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="auto_cor.html">auto_cor()</a></code></p>
<p>Other preprocessing:
<code><a href="auto_cor.html">auto_cor()</a></code>,
<code><a href="case_weights.html">case_weights()</a></code>,
<code><a href="default_distance_thresholds.html">default_distance_thresholds()</a></code>,
<code><a href="double_center_distance_matrix.html">double_center_distance_matrix()</a></code>,
<code><a href="is_binary.html">is_binary()</a></code>,
<code><a href="make_spatial_fold.html">make_spatial_fold()</a></code>,
<code><a href="make_spatial_folds.html">make_spatial_folds()</a></code>,
<code><a href="the_feature_engineer.html">the_feature_engineer()</a></code>,
<code><a href="weights_from_distance_matrix.html">weights_from_distance_matrix()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">plants_df</span>,</span></span>
<span class="r-in"><span>  <span class="va">plants_predictors</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">auto_vif</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">plants_df</span><span class="op">[</span>, <span class="va">plants_predictors</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> [auto_vif()]: Variables are not collinear.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">y</span><span class="op">$</span><span class="va">selected.variables</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "bias_area_km2"                   "bias_species_per_record"        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "climate_aridity_index_average"   "climate_hypervolume"            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "climate_velocity_lgm_average"    "neighbors_count"                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "neighbors_percent_shared_edge"   "human_population_density"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "topography_elevation_average"    "landcover_herbs_percent_average"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "fragmentation_cohesion"          "fragmentation_division"         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "neighbors_area"                  "human_population"               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [15] "human_footprint_average"         "climate_bio1_average"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [17] "climate_bio15_minimum"          </span>
<span class="r-in"><span><span class="va">y</span><span class="op">$</span><span class="va">vif</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                           variable      vif</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          human_footprint_average 4.701199</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2             climate_bio1_average 2.996871</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         human_population_density 2.879088</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                 human_population 2.709401</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     topography_elevation_average 1.975092</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    climate_aridity_index_average 1.938247</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7                    bias_area_km2 1.847408</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  landcover_herbs_percent_average 1.742363</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     climate_velocity_lgm_average 1.742296</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   neighbors_percent_shared_edge 1.680098</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11          fragmentation_cohesion 1.537666</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12         bias_species_per_record 1.508060</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13           climate_bio15_minimum 1.483121</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14                 neighbors_count 1.408907</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15                  neighbors_area 1.391563</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16             climate_hypervolume 1.390049</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17          fragmentation_division 1.334247</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">y</span><span class="op">$</span><span class="va">selected.variables.df</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   bias_area_km2 bias_species_per_record climate_aridity_index_average</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     268444.41               0.2699995                   -1.27163039</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      26658.41               0.1456615                    0.01279434</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     140062.77               0.1218554                    0.05070049</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      31915.27               0.1625342                   -0.57904797</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     716681.87               0.2475400                   -0.51033378</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     173261.40               0.4204510                   -0.75537704</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   climate_hypervolume climate_velocity_lgm_average neighbors_count</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          0.02239650                    7.6806232              10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          0.52194842                    7.9545641              13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          0.03088209                    6.4202598               8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          0.68598777                    0.5746547               4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          0.05199463                    6.5561073              10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          0.00147194                    7.6114518               8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   neighbors_percent_shared_edge human_population_density</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                     100.00000                7.0675297</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                      56.46095               42.5908861</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                     100.00000                0.8711942</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                      35.48473              218.8202463</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                     100.00000                3.0460006</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                     100.00000                0.7522835</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   topography_elevation_average landcover_herbs_percent_average</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                    86.807776                        16.22373</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                     6.921187                        53.90207</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                  1130.220919                        42.66630</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                  1872.903223                        54.36617</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                   166.793692                        28.21572</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                    86.900413                        18.40789</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   fragmentation_cohesion fragmentation_division neighbors_area human_population</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1               99.81169              0.9195281      2005112.5        1897238.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2               92.40274              0.9999953       720242.4        1135405.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3               99.68820              0.9690934     15661626.9         122021.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4               99.34487              0.9649031       284154.0        6983707.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5               99.89918              0.8698819      4646036.6        2183013.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6               99.73477              0.9294914      2801093.1         130341.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   human_footprint_average climate_bio1_average climate_bio15_minimum</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1               0.4305056            251.05816                    13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2               8.3018495            261.08870                    25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3               0.5687886             11.58566                    17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4              11.9806927            173.21428                    16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5               1.9740117            251.82974                    31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6               0.6538992            255.79948                    28</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://blasbenito.com" class="external-link">Blas M. Benito</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

