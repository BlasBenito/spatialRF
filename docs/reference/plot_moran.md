# Plots a Moran's I test of model residuals

Plots the results of spatial autocorrelation tests for a variety of
functions within the package. The x axis represents the Moran's I
estimate, the y axis contains the values of the distance thresholds, the
dot sizes represent the p-values of the Moran's I estimate, and the red
dashed line represents the theoretical null value of the Moran's I
estimate.

## Usage

``` r
plot_moran(
  model,
  point.color = viridis::viridis(
    100,
    option = "F",
    direction = -1
   ),
  line.color = "gray30",
  option = 1,
  ncol = 1,
  verbose = TRUE
)
```

## Arguments

- model:

  A model fitted with
  [`rf()`](https://blasbenito.github.io/spatialRF/reference/rf.md),
  [`rf_repeat()`](https://blasbenito.github.io/spatialRF/reference/rf_repeat.md),
  or
  [`rf_spatial()`](https://blasbenito.github.io/spatialRF/reference/rf_spatial.md),
  or a data frame generated by
  [`moran()`](https://blasbenito.github.io/spatialRF/reference/moran.md).
  Default: `NULL`

- point.color:

  Colors of the plotted points. Can be a single color name (e.g.
  "red4"), a character vector with hexadecimal codes (e.g. "#440154FF"
  "#21908CFF" "#FDE725FF"), or function generating a palette (e.g.
  `viridis::viridis(100)`). Default:
  `viridis::viridis(100, option = "F")`

- line.color:

  Character string, color of the line produced by
  [`ggplot2::geom_smooth()`](https://ggplot2.tidyverse.org/reference/geom_smooth.html).
  Default: `"gray30"`

- option:

  Integer, type of plot. If `1` (default) a line plot with Moran's I and
  p-values across distance thresholds is returned. If `2`, scatterplots
  of residuals versus lagged residuals per distance threshold and their
  corresponding slopes are returned. In models fitted with
  [`rf_repeat()`](https://blasbenito.github.io/spatialRF/reference/rf_repeat.md),
  the residuals and lags of the residuals are computed from the median
  residuals across repetitions. Option `2` is disabled if `x` is a data
  frame generated by
  [`moran()`](https://blasbenito.github.io/spatialRF/reference/moran.md).

- ncol:

  Number of columns of the plot. Only relevant when `option = 2`.
  Argument `ncol` of
  [wrap_plots](https://patchwork.data-imaginist.com/reference/wrap_plots.html).

- verbose:

  Logical, if `TRUE`, the resulting plot is printed, Default: `TRUE`

## Value

A ggplot.

## See also

[`moran()`](https://blasbenito.github.io/spatialRF/reference/moran.md),
[`moran_multithreshold()`](https://blasbenito.github.io/spatialRF/reference/moran_multithreshold.md)

Other visualization:
[`plot_evaluation()`](https://blasbenito.github.io/spatialRF/reference/plot_evaluation.md),
[`plot_importance()`](https://blasbenito.github.io/spatialRF/reference/plot_importance.md),
[`plot_optimization()`](https://blasbenito.github.io/spatialRF/reference/plot_optimization.md),
[`plot_residuals_diagnostics()`](https://blasbenito.github.io/spatialRF/reference/plot_residuals_diagnostics.md),
[`plot_response_curves()`](https://blasbenito.github.io/spatialRF/reference/plot_response_curves.md),
[`plot_response_surface()`](https://blasbenito.github.io/spatialRF/reference/plot_response_surface.md),
[`plot_training_df()`](https://blasbenito.github.io/spatialRF/reference/plot_training_df.md),
[`plot_training_df_moran()`](https://blasbenito.github.io/spatialRF/reference/plot_training_df_moran.md),
[`plot_tuning()`](https://blasbenito.github.io/spatialRF/reference/plot_tuning.md)

## Examples

``` r
data(plants_rf)

plot_moran(plants_rf)



plot_moran(plants_rf, option = 2)


```
