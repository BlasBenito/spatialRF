<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Visualize variable importance scores — plot_importance • spatialRF</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Visualize variable importance scores — plot_importance"><meta name="description" content="Creates a visualization of variable importance scores from models fitted with rf(), rf_repeat(), or rf_spatial(). For single-run models (rf(), rf_spatial()), displays points ordered by importance. For repeated models (rf_repeat()), displays violin plots showing the distribution of importance scores across model repetitions."><meta property="og:description" content="Creates a visualization of variable importance scores from models fitted with rf(), rf_repeat(), or rf_spatial(). For single-run models (rf(), rf_spatial()), displays points ordered by importance. For repeated models (rf_repeat()), displays violin plots showing the distribution of importance scores across model repetitions."><link rel="stylesheet" href="extra.css"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">spatialRF</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/non_spatial_models.html">Non-Spatial Random Forest Models</a></li>
    <li><a class="dropdown-item" href="../articles/spatial_models.html">Spatial Random Forest Models</a></li>
    <li><a class="dropdown-item" href="../articles/download_history.html">Download history</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Development</h6></li>
    <li><a class="dropdown-item" href="../articles/development_roadmap.html">Development Roadmap</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BlasBenito/spatialRF/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Visualize variable importance scores</h1>
      <small class="dont-index">Source: <a href="https://github.com/BlasBenito/spatialRF/blob/main/R/plot_importance.R" class="external-link"><code>R/plot_importance.R</code></a></small>
      <div class="d-none name"><code>plot_importance.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a visualization of variable importance scores from models fitted with <code><a href="rf.html">rf()</a></code>, <code><a href="rf_repeat.html">rf_repeat()</a></code>, or <code><a href="rf_spatial.html">rf_spatial()</a></code>. For single-run models (<code><a href="rf.html">rf()</a></code>, <code><a href="rf_spatial.html">rf_spatial()</a></code>), displays points ordered by importance. For repeated models (<code><a href="rf_repeat.html">rf_repeat()</a></code>), displays violin plots showing the distribution of importance scores across model repetitions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_importance</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  fill.color <span class="op">=</span> <span class="fu">viridis</span><span class="fu">::</span><span class="fu"><a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html" class="external-link">viridis</a></span><span class="op">(</span><span class="fl">100</span>, option <span class="op">=</span> <span class="st">"F"</span>, direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, alpha <span class="op">=</span> <span class="fl">1</span>, end <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span>,</span>
<span>  line.color <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>Model fitted with <code><a href="rf.html">rf()</a></code>, <code><a href="rf_repeat.html">rf_repeat()</a></code>, or <code><a href="rf_spatial.html">rf_spatial()</a></code>. Alternatively, a data frame with variable importance scores (for internal use only).</p></dd>


<dt id="arg-fill-color">fill.color<a class="anchor" aria-label="anchor" href="#arg-fill-color"></a></dt>
<dd><p>Character vector of colors or a function generating a color palette. Accepts hexadecimal codes (e.g., <code>c("#440154FF", "#21908CFF", "#FDE725FF")</code>) or palette functions (e.g., <code>viridis::viridis(100)</code>). For single-run models, creates a continuous gradient. For repeated models, assigns discrete colors to variables. Default: <code>viridis::viridis(100, option = "F", direction = -1, alpha = 1, end = 0.9)</code>.</p></dd>


<dt id="arg-line-color">line.color<a class="anchor" aria-label="anchor" href="#arg-line-color"></a></dt>
<dd><p>Character string specifying the color of point borders (single-run models) or violin plot outlines (repeated models). Default: <code>"white"</code>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, prints the plot to the graphics device. Default: <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>ggplot object that can be further customized or saved. The plot displays variable importance on the x-axis and variable names on the y-axis, ordered by importance (highest at top).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function creates different visualizations depending on the model type:</p>
<p><strong>Single-run models</strong> (<code><a href="rf.html">rf()</a></code>, <code><a href="rf_spatial.html">rf_spatial()</a></code> without repetitions):</p><ul><li><p>Displays points showing the importance value for each variable</p></li>
<li><p>Variables ordered top-to-bottom by importance (most important at top)</p></li>
<li><p>Point color represents importance magnitude using a continuous gradient</p></li>
</ul><p><strong>Repeated models</strong> (<code><a href="rf_repeat.html">rf_repeat()</a></code>, <code><a href="rf_spatial.html">rf_spatial()</a></code> with repetitions):</p><ul><li><p>Displays violin plots showing the distribution of importance across repetitions</p></li>
<li><p>Variables ordered top-to-bottom by median importance (most important at top)</p></li>
<li><p>The median line within each violin shows the center of the distribution</p></li>
<li><p>Width of violin reflects the density of importance values at each level</p></li>
<li><p>Each variable receives a distinct fill color</p></li>
</ul><p><strong>Importance metric:</strong></p>
<p>The x-axis shows permutation importance, which measures the increase in prediction error when a variable's values are randomly shuffled. Higher values indicate more important variables. Importance is computed on out-of-bag (OOB) samples, providing an unbiased estimate of variable contribution.</p>
<p><strong>Spatial predictors:</strong></p>
<p>In <code><a href="rf_spatial.html">rf_spatial()</a></code> models, all spatial predictors (MEMs or PCA factors) are grouped into a single category labeled "spatial_predictors" to simplify comparison with non-spatial predictors.</p>
<p><strong>Note on violin plots:</strong></p>
<p>Violin plots display kernel density estimates. The median line shown is the median of the density estimate, which may differ slightly from the actual data median. However, variables are always ordered by the true median importance to ensure accurate ranking.</p>
<p><strong>Cross-validated importance:</strong></p>
<p>This function does not plot results from <code><a href="rf_importance.html">rf_importance()</a></code>. For cross-validated importance plots, access <code>model$importance$cv.per.variable.plot</code> after running <code><a href="rf_importance.html">rf_importance()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="print_importance.html">print_importance()</a></code>, <code><a href="get_importance.html">get_importance()</a></code>, <code><a href="rf_importance.html">rf_importance()</a></code></p>
<p>Other visualization:
<code><a href="plot_evaluation.html">plot_evaluation()</a></code>,
<code><a href="plot_moran.html">plot_moran()</a></code>,
<code><a href="plot_optimization.html">plot_optimization()</a></code>,
<code><a href="plot_residuals_diagnostics.html">plot_residuals_diagnostics()</a></code>,
<code><a href="plot_response_curves.html">plot_response_curves()</a></code>,
<code><a href="plot_response_surface.html">plot_response_surface()</a></code>,
<code><a href="plot_training_df.html">plot_training_df()</a></code>,
<code><a href="plot_training_df_moran.html">plot_training_df_moran()</a></code>,
<code><a href="plot_tuning.html">plot_tuning()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">plants_rf</span>, <span class="va">plants_rf_spatial</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot importance from Random Forest model</span></span></span>
<span class="r-in"><span><span class="fu">plot_importance</span><span class="op">(</span><span class="va">plants_rf</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot importance from Spatial Random Forest model</span></span></span>
<span class="r-in"><span><span class="fu">plot_importance</span><span class="op">(</span><span class="va">plants_rf_spatial</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://blasbenito.com" class="external-link">Blas M. Benito</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

